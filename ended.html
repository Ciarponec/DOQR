<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GÃ¶rÃ¼ÅŸme Bitti</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #f8f9fa; padding: 2em; }
    h1 { color: #1976d2; }
    button {
      margin-top: 1.5em;
      font-size: 16px;
      padding: 0.8em 2em;
      background: #1976d2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #langSelect { position: absolute; right: 20px; top: 16px; font-size: 16px; }
    #fallbackMsg { margin-top: 1em; color: #888; font-size: 15px; display: none; }
  </style>
</head>
<body>
  <select id="langSelect">
    <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
    <option value="en">ğŸ‡¬ğŸ‡§ English</option>
    <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
  </select>
  <h1 id="endTitle">ğŸ“´ GÃ¶rÃ¼ÅŸme SonlandÄ±rÄ±ldÄ±</h1>
  <p id="endMsg">GÃ¶rÃ¼ÅŸmeniz baÅŸarÄ±yla sona erdi.</p>
  <button id="closeBtn">Sekmeyi Kapat</button>
  <p id="fallbackMsg">Sekme otomatik olarak kapanmazsa tarayÄ±cÄ±nÄ±zdan manuel olarak kapatabilirsiniz.</p>

  <script>
    const TEXTS = {
      end_title: {
        tr: "ğŸ“´ GÃ¶rÃ¼ÅŸme SonlandÄ±rÄ±ldÄ±",
        en: "ğŸ“´ Call Ended",
        ru: "ğŸ“´ Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½"
      },
      end_msg: {
        tr: "GÃ¶rÃ¼ÅŸmeniz baÅŸarÄ±yla sona erdi.",
        en: "Your call has ended successfully.",
        ru: "Ğ’Ğ°Ñˆ Ğ·Ğ²Ğ¾Ğ½Ğ¾Ğº ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½."
      },
      close_btn: {
        tr: "Sekmeyi Kapat",
        en: "Close Tab",
        ru: "Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ²ĞºĞ»Ğ°Ğ´ĞºÑƒ"
      },
      fallback: {
        tr: "Sekme otomatik olarak kapanmazsa tarayÄ±cÄ±nÄ±zdan manuel olarak kapatabilirsiniz.",
        en: "If the tab doesn't close automatically, please close it manually from your browser.",
        ru: "Ğ•ÑĞ»Ğ¸ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ° Ğ½Ğµ Ğ·Ğ°ĞºÑ€Ğ¾ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸, Ğ·Ğ°ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ ĞµÑ‘ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ."
      }
    };

    const params = new URLSearchParams(window.location.search);
    let lang = params.get('lang') || localStorage.getItem('doqrLang') || (navigator.language.startsWith('tr') ? 'tr' : (navigator.language.startsWith('ru') ? 'ru' : 'en'));
    document.getElementById('langSelect').value = lang;

    function setTexts() {
      document.getElementById('endTitle').textContent = TEXTS.end_title[lang];
      document.getElementById('endMsg').textContent = TEXTS.end_msg[lang];
      document.getElementById('closeBtn').textContent = TEXTS.close_btn[lang];
      document.getElementById('fallbackMsg').textContent = TEXTS.fallback[lang];
    }
    setTexts();

    document.getElementById('langSelect').onchange = (e) => {
      lang = e.target.value;
      localStorage.setItem('doqrLang', lang);
      setTexts();
    };

    document.getElementById('closeBtn').onclick = () => {
      const closed = window.close();
      // iOS/Safari engellerse fallback gÃ¶ster
      setTimeout(() => {
        document.getElementById('fallbackMsg').style.display = 'block';
      }, 300);
    };
  </script>
</body>
</html>
